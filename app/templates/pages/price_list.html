{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Page header -->
<section class="pt-20 md:pt-28 pb-10 text-white">
  <div class="relative overflow-hidden">
    <div class="absolute inset-0" style="background-image:url('/static/assets/images/page-header.jpeg');background-size:cover;background-position:center"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60"></div>
    <div class="relative max-w-7xl mx-auto px-4 py-10">
      <h1 class="text-3xl md:text-5xl font-bold mb-2 md:mb-4">Price List</h1>
      <p class="text-lg text-gray-100 mb-6 leading-relaxed line-clamp-2">
        Download our comprehensive price list for all pharmaceutical products with latest pricing information.
      </p>
      <nav class="mt-3 flex items-center gap-2 text-sm">
        <a href="/" class="px-3 py-1 rounded-full bg-white/10 hover:bg-white/20 text-white">Home</a>
        <span class="text-white/70">/</span>
        <span class="px-3 py-1 rounded-full bg-white text-arivas-red font-semibold">Price List</span>
      </nav>
    </div>
  </div>
</section>

<!-- Price List Content -->
<section class="py-16 bg-gray-50">
  <div class="max-w-7xl mx-auto px-4">
    
    {% if price_list %}
    <!-- Price List Available -->
    <div class="text-center mb-12">
      <div class="w-20 h-20 bg-arivas-red rounded-full flex items-center justify-center mx-auto mb-6">
        <i class="fas fa-file-pdf text-white text-2xl"></i>
      </div>
      <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">{{ price_list.title }}</h2>
      <p class="text-lg text-gray-600 mb-2">{{ price_list.description }}</p>
      <p class="text-sm text-gray-500 mb-8">
        Version: {{ price_list.version }} | 
        Last Updated: {{ price_list.updated_date|date:"F d, Y" }}
      </p>
    </div>

    <!-- Download Options -->
    <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
      <div class="text-center">
        <h3 class="text-xl font-semibold text-gray-900 mb-6">Download Options</h3>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <!-- Download PDF Button -->
          <a href="{{ price_list.pdf_file.url }}" 
             download="{{ price_list.title }}-{{ price_list.version }}.pdf"
             class="flex items-center justify-center gap-3 bg-arivas-red hover:bg-red-700 text-white font-semibold py-4 px-8 rounded-lg transition-colors">
            <i class="fas fa-download text-xl"></i>
            <span>Download PDF</span>
          </a>
          
          <!-- View PDF Button -->
          <a href="{{ price_list.pdf_file.url }}" 
             target="_blank"
             class="flex items-center justify-center gap-3 border-2 border-arivas-red text-arivas-red hover:bg-arivas-red hover:text-white font-semibold py-4 px-8 rounded-lg transition-colors">
            <i class="fas fa-eye text-xl"></i>
            <span>View Online</span>
          </a>
        </div>
        
        <p class="text-sm text-gray-500 mt-4">
          File size: {{ price_list.pdf_file.size|filesizeformat }}
        </p>
      </div>
    </div>

    <!-- PDF Viewer -->
    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
      <div class="p-4 bg-gray-50 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900">Price List Preview</h3>
      </div>
      <div class="relative" style="height: 600px;">
        <iframe 
          src="{{ price_list.pdf_file.url }}" 
          width="100%" 
          height="100%" 
          style="border: none;"
          title="Price List PDF">
        </iframe>
        <!-- Fallback for browsers that don't support PDF viewing -->
        <div class="absolute inset-0 flex items-center justify-center bg-gray-100" style="display: none;" id="pdf-fallback">
          <div class="text-center">
            <i class="fas fa-file-pdf text-4xl text-gray-400 mb-4"></i>
            <p class="text-gray-600 mb-4">Unable to display PDF preview</p>
            <a href="{{ price_list.pdf_file.url }}" 
               target="_blank"
               class="bg-arivas-red hover:bg-red-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors">
              Open PDF in New Tab
            </a>
          </div>
        </div>
      </div>
    </div>

    {% else %}
    <!-- No Price List Available -->
    <div class="text-center py-16">
      <div class="w-20 h-20 bg-gray-300 rounded-full flex items-center justify-center mx-auto mb-6">
        <i class="fas fa-file-pdf text-gray-500 text-2xl"></i>
      </div>
      <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">Price List Not Available</h2>
      <p class="text-lg text-gray-600 mb-8">
        Our price list is currently being updated. Please check back soon or contact us for pricing information.
      </p>
      
      <!-- Contact Options -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact/" 
           class="flex items-center justify-center gap-3 bg-arivas-red hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
          <i class="fas fa-envelope"></i>
          <span>Contact Us</span>
        </a>
        
        <a href="tel:+917001841379" 
           class="flex items-center justify-center gap-3 border-2 border-arivas-red text-arivas-red hover:bg-arivas-red hover:text-white font-semibold py-3 px-6 rounded-lg transition-colors">
          <i class="fas fa-phone"></i>
          <span>Call Now</span>
        </a>
      </div>
    </div>
    {% endif %}

    <!-- Additional Information -->
    <div class="mt-12">
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
        <div class="flex items-start gap-3">
          <i class="fas fa-info-circle text-blue-600 text-xl mt-1"></i>
          <div>
            <h4 class="text-lg font-semibold text-blue-900 mb-2">Important Information</h4>
            <ul class="text-blue-800 space-y-1 text-sm">
              <li>• Prices are subject to change without prior notice</li>
              <li>• All prices are in Indian Rupees (INR)</li>
              <li>• Minimum order quantities may apply for certain products</li>
              <li>• For bulk orders and special discounts, please contact our sales team</li>
              <li>• Prices may vary based on location and distributor</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Information -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h4 class="text-lg font-semibold text-gray-900 mb-4">Sales Enquiry</h4>
        <div class="space-y-3">
          <div class="flex items-center gap-3">
            <i class="fas fa-phone text-arivas-red"></i>
            <span class="text-gray-700">+91 7001841379</span>
          </div>
          <div class="flex items-center gap-3">
            <i class="fas fa-envelope text-arivas-red"></i>
            <span class="text-gray-700">arivaspharma@gmail.com</span>
          </div>
          <div class="flex items-center gap-3">
            <i class="fas fa-clock text-arivas-red"></i>
            <span class="text-gray-700">Mon-Sat, 10:00 AM - 6:00 PM</span>
          </div>
        </div>
      </div>
      
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h4 class="text-lg font-semibold text-gray-900 mb-4">Need Help?</h4>
        <p class="text-gray-600 text-sm mb-4">
          Our team is ready to assist you with product information, pricing queries, and order placement.
        </p>
        <a href="mailto:arivaspharma@gmail.com?subject=Price List Enquiry" 
           class="inline-flex items-center gap-2 text-arivas-red hover:text-red-700 font-medium">
          <i class="fas fa-paper-plane"></i>
          <span>Send Enquiry</span>
        </a>
      </div>
    </div>
  </div>
</section>

<script>
// Check if PDF can be displayed
document.addEventListener('DOMContentLoaded', function() {
  const iframe = document.querySelector('iframe');
  const fallback = document.getElementById('pdf-fallback');
  
  if (iframe && fallback) {
    iframe.onload = function() {
      try {
        // If PDF doesn't load properly, show fallback
        if (!iframe.contentDocument) {
          iframe.style.display = 'none';
          fallback.style.display = 'flex';
        }
      } catch (e) {
        iframe.style.display = 'none';
        fallback.style.display = 'flex';
      }
    };
    
    iframe.onerror = function() {
      iframe.style.display = 'none';
      fallback.style.display = 'flex';
    };
  }
});
</script>

{% endblock %}
